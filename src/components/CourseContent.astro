---
import { getLangFromUrl, useTranslations } from '../i18n/utils';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

const modules = [
  {
    id: 'module-1',
    title: t('courseContent.module1.title'),
    description: t('courseContent.module1.description'),
    lessons: [
      { id: 'lesson-1-1', title: t('courseContent.module1.lesson1') },
      { id: 'lesson-1-2', title: t('courseContent.module1.lesson2') },
      { id: 'lesson-1-3', title: t('courseContent.module1.lesson3') },
      { id: 'lesson-1-4', title: t('courseContent.module1.lesson4') },
      { id: 'lesson-1-5', title: t('courseContent.module1.lesson5') }
    ]
  },
  {
    id: 'module-2',
    title: t('courseContent.module2.title'),
    description: t('courseContent.module2.description'),
    lessons: [
      { id: 'lesson-2-1', title: t('courseContent.module2.lesson1') },
      { id: 'lesson-2-2', title: t('courseContent.module2.lesson2') },
      { id: 'lesson-2-3', title: t('courseContent.module2.lesson3') },
      { id: 'lesson-2-4', title: t('courseContent.module2.lesson4') },
      { id: 'lesson-2-5', title: t('courseContent.module2.lesson5') }
    ]
  },
  {
    id: 'module-3',
    title: t('courseContent.module3.title'),
    description: t('courseContent.module3.description'),
    lessons: [
      { id: 'lesson-3-1', title: t('courseContent.module3.lesson1') },
      { id: 'lesson-3-2', title: t('courseContent.module3.lesson2') },
      { id: 'lesson-3-3', title: t('courseContent.module3.lesson3') },
      { id: 'lesson-3-4', title: t('courseContent.module3.lesson4') },
      { id: 'lesson-3-5', title: t('courseContent.module3.lesson5') }
    ]
  },
  {
    id: 'module-4',
    title: t('courseContent.module4.title'),
    description: t('courseContent.module4.description'),
    lessons: [
      { id: 'lesson-4-1', title: t('courseContent.module4.lesson1') },
      { id: 'lesson-4-2', title: t('courseContent.module4.lesson2') },
      { id: 'lesson-4-3', title: t('courseContent.module4.lesson3') },
      { id: 'lesson-4-4', title: t('courseContent.module4.lesson4') },
      { id: 'lesson-4-5', title: t('courseContent.module4.lesson5') }
    ]
  },
  {
    id: 'module-5',
    title: t('courseContent.module5.title'),
    description: t('courseContent.module5.description'),
    lessons: [
      { id: 'lesson-5-1', title: t('courseContent.module5.lesson1') },
      { id: 'lesson-5-2', title: t('courseContent.module5.lesson2') },
      { id: 'lesson-5-3', title: t('courseContent.module5.lesson3') },
      { id: 'lesson-5-4', title: t('courseContent.module5.lesson4') },
      { id: 'lesson-5-5', title: t('courseContent.module5.lesson5') }
    ]
  },
  {
    id: 'module-6',
    title: t('courseContent.module6.title'),
    description: t('courseContent.module6.description'),
    lessons: [
      { id: 'lesson-6-1', title: t('courseContent.module6.lesson1') },
      { id: 'lesson-6-2', title: t('courseContent.module6.lesson2') },
      { id: 'lesson-6-3', title: t('courseContent.module6.lesson3') },
      { id: 'lesson-6-4', title: t('courseContent.module6.lesson4') }
    ]
  },
  {
    id: 'module-7',
    title: t('courseContent.module7.title'),
    description: t('courseContent.module7.description'),
    lessons: [
      { id: 'lesson-7-1', title: t('courseContent.module7.lesson1') },
      { id: 'lesson-7-2', title: t('courseContent.module7.lesson2') },
      { id: 'lesson-7-3', title: t('courseContent.module7.lesson3') }
    ]
  }
];
---

<section id="course-content" class="py-16 bg-white">
  <div class="container mx-auto px-4">
    <div class="text-center mb-12">
      <span class="text-primary-500 text-sm font-medium uppercase tracking-wider">
        {t('courseContent.tag')}
      </span>
      <h2 class="text-3xl font-bold mt-2 mb-4 text-gray-800">
        {t('courseContent.title')}
      </h2>
      <p class="text-gray-600 max-w-3xl mx-auto">
        {t('courseContent.subtitle')}
      </p>
    </div>
    
    <div class="max-w-3xl mx-auto">
      <div class="space-y-4">
        {modules.map((module, index) => (
          <div class="mb-4">
            <!-- Módulo expandible usando solo CSS -->
            <div class="w-full">
              <details class="group">
                <summary class="flex justify-between items-center px-6 py-4 bg-blue-50 text-left rounded-xl cursor-pointer focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-opacity-50">
                  <div class="flex items-center gap-4">
                    <div class="bg-primary-500 text-white w-8 h-8 rounded-full flex items-center justify-center font-semibold">
                      {index + 1}
                    </div>
                    <span class="font-semibold text-gray-800">{module.title}</span>
                  </div>
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-primary-500 transition-transform group-open:rotate-180" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                  </svg>
                </summary>
                <div class="px-6 py-4 bg-white rounded-b-xl border border-gray-100 border-t-0">
                  <p class="text-gray-600 mb-4">{module.description}</p>
                  <ul class="space-y-2">
                    {module.lessons.map(lesson => (
                      <li class="flex items-center gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-primary-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                        <span class="text-gray-700">{lesson.title}</span>
                      </li>
                    ))}
                  </ul>
                </div>
              </details>
            </div>
          </div>
        ))}
      </div>
    </div>
  </div>
</section>

<style>
  /* Estilos adicionales para garantizar que los detalles se vean bien */
  details > summary {
    list-style: none;
  }
  details > summary::-webkit-details-marker {
    display: none;
  }
  
  /* Transición suave para la flecha */
  svg {
    transition: transform 0.3s ease;
  }
  
  /* Formato para el borde */
  details {
    border-radius: 0.75rem;
    overflow: hidden;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    border: 1px solid #f0f0f0;
  }
  
  /* Activar el primer acordeón por defecto (opcional) */
  details:first-child {
    open: true;
  }
</style>
