---
import { getLangFromUrl, useTranslations } from '../i18n/utils';
import VideoThumbnail from './VideoThumbnail.astro';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

// El video que quieres incluir
const featuredVideoId = "aE14MKd2fUw"; // Extraído del URL de YouTube
const featuredVideoTitle = "DeSci Quark - Blockchain para Científicos";

// Ya no usamos Tally.so - formulario removido para optimización
---

<section class="hero-section py-8 md:py-16">
  <div class="container mx-auto px-4 hero-content">
    <div class="flex flex-col lg:flex-row items-center gap-8 lg:gap-12">
      <div class="w-full lg:w-1/2">
        <h1 class="hero-title text-3xl md:text-4xl lg:text-5xl font-bold text-white mb-6">
          {t('hero.title')}
        </h1>
        <p class="hero-subtitle text-blue-100 text-lg mb-8 max-w-xl">
          {t('hero.description')}
        </p>
        <div class="hero-cta flex flex-col sm:flex-row gap-4">
          <a href={lang === 'es' ? 'https://course.desciquark.com/es/registro/?ld_register_id=3586' : 'https://course.desciquark.com/register/?ld_register_id=2160'} class="btn btn-primary bg-white text-primary-600 hover:bg-blue-50 shadow-lg">
            {t('hero.registerBtn')}
          </a>
          <a href="#course-content" class="btn btn-outline text-white border-white hover:bg-white hover:text-primary-600 shadow-md">
            {t('hero.learnMoreBtn')}
          </a>
        </div>
      </div>
      <div class="w-full lg:w-1/2 mt-8 lg:mt-0">
        <!-- Contenedor del video optimizado -->
        <div class="video-wrapper max-w-[600px] mx-auto">
          <div class="glass-card bg-white/20 border border-white/30 relative overflow-hidden rounded-xl shadow-xl">
            <VideoThumbnail 
              videoId={featuredVideoId} 
              title={featuredVideoTitle}
            />
          </div>
        </div>
      </div>
    </div>
  </div>
</section>





<style>
  /* Aseguramos que el contenedor del video tenga suficiente espacio */
  .glass-card {
    max-width: 100%;
    margin: 0 auto;
    padding: 0; /* Quitamos el padding para que el video ocupe todo el espacio */
  }
  
  /* Ajustes para el modal de Tally */
  #registerModal .bg-white {
    min-height: 600px;
    max-height: 80vh;
  }
  
  /* Contenedor del video */
  .video-wrapper {
    width: 100%;
  }
</style>
