---
import { useTranslations } from '../../i18n/utils';
import TallyForm from './TallyForm.astro';
import BenefitsCard from './BenefitsCard.astro';
import TesterInfo from './TesterInfo.astro';

interface Props {
  lang: string;
}

const { lang } = Astro.props;
const t = useTranslations(lang);
---

<main class="min-h-screen bg-gradient-to-br from-primary-900 via-primary-800 to-blue-900">
  <!-- Hero Section -->
  <section class="pt-20 pb-12 px-4">
    <div class="container mx-auto max-w-4xl text-center">
      <div class="mb-8">
        <h1 class="text-4xl md:text-5xl lg:text-6xl font-bold text-white mb-6 leading-tight">
          {t('preRegister.heroTitle')}
        </h1>
        
        <p class="text-xl md:text-2xl text-blue-100 mb-4 max-w-3xl mx-auto">
          {t('preRegister.heroSubtitle')}
        </p>
        
        <p class="text-lg text-blue-200 max-w-2xl mx-auto leading-relaxed">
          {t('preRegister.heroDescription')}
        </p>
      </div>

      <!-- Indicador de beta -->
      <div class="inline-flex items-center px-4 py-2 bg-yellow-500/20 border border-yellow-400/30 rounded-full text-yellow-300 text-sm font-medium mb-8">
        <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
        </svg>
        {lang === 'es' ? 'Programa Beta Testing' : 'Beta Testing Program'}
      </div>
    </div>
  </section>

  <!-- Tester Program Info -->
  <section class="pb-8 px-4">
    <div class="container mx-auto max-w-4xl">
      <TesterInfo lang={lang} />
    </div>
  </section>

  <!-- Main Content -->
  <section class="pb-16 px-4">
    <div class="container mx-auto max-w-5xl">
      <div class="grid lg:grid-cols-3 gap-6 lg:gap-8">
        
        <!-- Benefits Sidebar -->
        <div class="lg:col-span-1 order-2 lg:order-1 space-y-6">
          <BenefitsCard lang={lang} />
          
          <!-- Additional Info Card -->
          <div class="bg-white/5 backdrop-blur-sm border border-white/10 rounded-xl p-4 lg:p-6">
            <h3 class="text-base lg:text-lg font-semibold text-white mb-3">
              {lang === 'es' ? 'Información Importante' : 'Important Information'}
            </h3>
            <ul class="space-y-2 text-sm text-blue-100">
              <li class="flex items-start space-x-2">
                <span class="text-green-400 mt-1 flex-shrink-0">•</span>
                <span>{lang === 'es' ? 'El curso es completamente gratuito' : 'The course is completely free'}</span>
              </li>
              <li class="flex items-start space-x-2">
                <span class="text-green-400 mt-1 flex-shrink-0">•</span>
                <span>{lang === 'es' ? 'No se requiere experiencia previa' : 'No previous experience required'}</span>
              </li>
              <li class="flex items-start space-x-2">
                <span class="text-green-400 mt-1 flex-shrink-0">•</span>
                <span>{lang === 'es' ? 'Aprende a tu propio ritmo' : 'Learn at your own pace'}</span>
              </li>
              <li class="flex items-start space-x-2">
                <span class="text-green-400 mt-1 flex-shrink-0">•</span>
                <span>{lang === 'es' ? 'Certificado digital incluido' : 'Digital certificate included'}</span>
              </li>
            </ul>
          </div>
        </div>

        <!-- Registration Form -->
        <div class="lg:col-span-2 order-1 lg:order-2">
          <div class="bg-white/10 backdrop-blur-sm border border-white/20 rounded-2xl p-6 md:p-8 shadow-2xl">
            
            <div class="text-center mb-8">
              <h2 class="text-2xl md:text-3xl font-bold text-white mb-4">
                {t('preRegister.formTitle')}
              </h2>
              <p class="text-blue-100 text-lg">
                {t('preRegister.formDescription')}
              </p>
            </div>

            <!-- Formulario Tally -->
            <div class="bg-white rounded-xl overflow-hidden shadow-lg">
              <TallyForm 
                lang={lang} 
                height="600px"
                className="rounded-xl"
              />
            </div>

            <!-- Footer del formulario -->
            <div class="mt-6 text-center">
              <p class="text-sm text-blue-200">
                {lang === 'es' 
                  ? 'Al registrarte, aceptas recibir comunicaciones sobre el curso y el programa de testing.' 
                  : 'By registering, you agree to receive communications about the course and testing program.'
                }
              </p>
            </div>
          </div>
        </div>

      </div>
    </div>
  </section>

  <!-- CTA Section -->
  <section class="py-12 px-4 bg-black/20">
    <div class="container mx-auto max-w-4xl text-center">
      <h3 class="text-2xl md:text-3xl font-bold text-white mb-4">
        {lang === 'es' ? '¿Tienes preguntas?' : 'Have questions?'}
      </h3>
      <p class="text-blue-100 mb-6">
        {lang === 'es' 
          ? 'Contáctanos si necesitas más información sobre el curso o el programa de testing.'
          : 'Contact us if you need more information about the course or testing program.'
        }
      </p>
      <a 
        href="mailto:info@desciquark.com" 
        class="inline-flex items-center px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors duration-200"
      >
        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
        </svg>
        {lang === 'es' ? 'Enviar Email' : 'Send Email'}
      </a>
    </div>
  </section>
</main>

<!-- Structured Data -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Course",
  "name": "Blockchain Fundamentals for Scientists using Cardano",
  "description": "Free course introducing scientists to decentralized science through blockchain technology",
  "provider": {
    "@type": "Organization",
    "name": "DeSci Quark"
  },
  "courseMode": "online",
  "educationalLevel": "beginner",
  "timeRequired": "P4W",
  "inLanguage": ["es", "en"],
  "isAccessibleForFree": true,
  "offers": {
    "@type": "Offer",
    "price": "0",
    "priceCurrency": "USD"
  }
}
</script>
