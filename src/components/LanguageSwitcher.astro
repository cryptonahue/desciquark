---
// LanguageSwitcher.astro
// Componente para cambiar entre idiomas con un icono de globo

interface Props {
  currentPath: string;
  currentLang: string;
}

const { currentPath, currentLang } = Astro.props;

// Obtener URL alternativas para el selector de idioma
const esPath = currentPath.startsWith('/en/') 
  ? currentPath.replace('/en/', '/') 
  : currentPath;
const enPath = currentPath.startsWith('/en/') 
  ? currentPath 
  : '/en' + currentPath;
---

<div class="relative group">
  <button aria-label="Cambiar idioma" class="flex items-center gap-1 p-2 rounded-md hover:bg-gray-100 transition-colors duration-200">
    <img src="/icons/globe.svg" alt="Cambiar idioma" class="h-5 w-5 text-gray-600" />
    <span class="text-sm font-medium">{currentLang === 'en' ? 'EN' : 'ES'}</span>
    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
    </svg>
  </button>
  
  <div class="absolute right-0 mt-1 w-24 bg-white rounded-md shadow-lg overflow-hidden transform scale-0 group-hover:scale-100 opacity-0 group-hover:opacity-100 transition-all duration-200 origin-top-right z-50">
    <a href={esPath} class={`block px-4 py-2 text-sm text-gray-700 hover:bg-primary-50 hover:text-primary-600 ${currentLang === 'es' ? 'bg-primary-50 text-primary-600 font-medium' : ''}`}>Espa√±ol</a>
    <a href={enPath} class={`block px-4 py-2 text-sm text-gray-700 hover:bg-primary-50 hover:text-primary-600 ${currentLang === 'en' ? 'bg-primary-50 text-primary-600 font-medium' : ''}`}>English</a>
  </div>
</div>
